
This turorial explain how to run the mapping or the localization for the robox.

/// Frame
ROS maintain a frame tree with relation between the frame. Running the robox with onBootROS.launch create three frames and the transforms between those frames:
- /world_odom is the frame for the odometry.
- /robot_base is the frame fixed to the robot
- /laser the frame fixed to the laser
When running the localization or mapping, the goal is to find the rover position in relation to an absolut frame. The world_odom is not an absolut frame as it contain error due the odometry. The absolut frame for localization or mapping is called /map and mapping or localization provide a relation between the map frame and the world_odom frame.
Relation between frame:
/map---->/world_odom----->/robot_base---->/laser 

/// PointCloud to LaserScan conversion
To use mapping and localization with with the robox, the point cloud provides by the robox needs to be transform to a LaserScan structure (ROS mapping and localization only support LaserScan as input). The node pointCloudToLaserScan can convert the PointCloud to a LaserScan. 

/// Mapping in real time
The mapping use the slam_gmapping package provide by ROS. It require a transformation of the laser data from a PointCloud to a LaserScan. This is done by the node pointCloudToLaserScan. 
1) launch the robox platform with the ros launch script:
$ roslaunch onBootROS.launch
2) launch the mapping with
$ roslaunch mapping.launch
3) Save map in file mymap
$ rosrun map_server map_saver -f mymap


/// Localization in real time
The localization use the amcl package provide by ROS and required a map
1) provide the map path in the launch file map.launch
2) launch the robox platform with the ros launch script:
$ roslaunch onBootROS.launch
3) launch the mapping with
$ roslaunch mapping.launch

/// Mapping and localization from bag file
Variant 1)
1)Set the parameter use_sim_tim to true:
$ rosparam set use_sim_time true
2) Replay a back file name mybag.bag
$ rosbag play --clock  mybag.bag 
3) Same has in real time without runing the robox
Variant 2) 
Run it with a single launch file.
1) Set the path to the log file in play_bag_file.launch
2) Run localization_bag.launch or mapping_bag.launch



/// Record a bag file named mybag
rosbag record -a -O "mybag"

/// Vizualisation
rviz can be use for vizualisation
rosrun rviz rviz

